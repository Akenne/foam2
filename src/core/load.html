<html>
  <head>
    <script language="javascript" src="stdlib.js"></script>
    <script>console.time('boot');</script>
    <script>console.time('loadContext');</script>
    <script language="javascript" src="context.js"></script>
    <script>console.timeEnd('loadContext');</script>
    <script>console.time('loadStdlib');</script>
    <script language="javascript" src="stdlib.js"></script>
    <script>console.timeEnd('loadStdlib');</script>
    <script>console.time('loadMM');</script>
    <script language="javascript" src="mm.js"></script>
    <script>console.timeEnd('loadMM');</script>
    <script>console.time('loadSlot');</script>
    <script language="javascript" src="Slot.js"></script>
    <script>console.timeEnd('loadSlot');</script>
    <script>console.timeEnd('boot');</script>
    <title>Load FOAM</title>
  </head>
  <body>
    <script>
      CLASS({
        name: 'PubSubTest',
        topics: [ 'onFoo', 'onBar' ],
        properties: [ 'a', 'b', 'c' ]
      });

      var t = PubSubTest.create();

      t.onFoo.sub(function(sub, subTopic, arg1) {
        console.log('onFoo: ', sub, sub.topic.toString(), subTopic, arg1);
      });
      t.onFoo.pub('hello','world');

      t.onPropertyChange.sub(function(sub, subTopic, oldValue,newValue) {
        console.log('global: ', sub, sub.topic.toString(), subTopic, oldValue, newValue);
      });

      t.onPropertyChange.sub(function(sub, subTopic, oldValue,newValue) {
        console.log('a: ', sub, sub.topic.toString(), subTopic, oldValue, newValue);
      }, 'a');

      t.a = 42;
      t.b = 84;
      t.a++;
    </script>
  </body>
</html>
